(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["college-school-lists"],{"29c1":function(e,t,n){"use strict";n.r(t);var c=n("7a23"),r={class:"left-panel"},a=Object(c["createTextVNode"])(" 添加 "),o=Object(c["createTextVNode"])("导入学校数据 ");function s(e,t,n,s,i,u){var l=Object(c["resolveComponent"])("el-button"),d=Object(c["resolveComponent"])("yj-upload"),h=Object(c["resolveComponent"])("el-header"),m=Object(c["resolveComponent"])("el-table-column"),f=Object(c["resolveComponent"])("yjTable"),p=Object(c["resolveComponent"])("el-main"),b=Object(c["resolveComponent"])("el-container");return Object(c["openBlock"])(),Object(c["createBlock"])(b,null,{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(h,null,{default:Object(c["withCtx"])((function(){return[Object(c["createElementVNode"])("div",r,[Object(c["createVNode"])(l,{icon:"el-icon-plus",type:"primary",onClick:t[0]||(t[0]=function(e){return u.onAdd()})},{default:Object(c["withCtx"])((function(){return[a]})),_:1}),Object(c["createVNode"])(d,{modelValue:e.imgurl3,"onUpdate:modelValue":t[1]||(t[1]=function(t){return e.imgurl3=t}),apiObj:e.uploadApi,accept:".xls,.xlsx","on-success":u.success},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(l,{icon:"el-icon-plus",type:"primary",onClick:u.handleGenCodes},{default:Object(c["withCtx"])((function(){return[o]})),_:1},8,["onClick"])]})),_:1},8,["modelValue","apiObj","on-success"])])]})),_:1}),Object(c["createVNode"])(p,{class:"nopadding"},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(f,{ref:"yjTable",data:i.tableData,apiObj:i.apiObj,params:i.formParams},{default:Object(c["withCtx"])((function(){return[Object(c["createVNode"])(m,{type:"selection",width:"50"}),Object(c["createVNode"])(m,{label:"ID",prop:"id",width:"150"}),Object(c["createVNode"])(m,{label:"code",prop:"code",width:"150"}),Object(c["createVNode"])(m,{label:"学校名称",prop:"title",width:"150"})]})),_:1},8,["data","apiObj","params"])]})),_:1})]})),_:1})}var i=n("1da1"),u=(n("d81d"),n("a15b"),n("96cf"),{name:"setting:code",components:{},data:function(){return{formParams:{},apiObj:this.$HTTP().url("/admin/college/school/lists"),tableData:[],queryParams:{table_name:void 0},selection:[]}},created:function(){return Object(i["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onAdd:function(){this.$modalForm(this.$HTTP().post("/admin/generator/generator_table/form")).then((function(e){}))},success:function(e){console.log(e),this.$HTTP().post("/import/school",e).then((function(e){}))},selectionChange:function(e){this.selection=e},confirm:function(){this.handleSuccess()},handleGenCodes:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.$refs.preview);case 1:case"end":return t.stop()}}),t)})))()},generateCode:function(e){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$message.info("代码生成下载中，请稍后"),n.next=3,t.$API.generate.generate(e).then((function(e){e.message&&!e.success?t.$message.error(e.message):(t.$TOOL.download(e),t.$message.success("代码生成成功"))}));case 3:case"end":return n.stop()}}),n)})))()},handleDeleteBatch:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.selection.length>0)){t.next=6;break}return n=e.selection.map((function(e){return e.id})),t.next=4,e.handleDelete(n.join(","));case 4:t.next=7;break;case 6:e.$message.error("请选择要删除的项");case 7:case"end":return t.stop()}}),t)})))()},handleDelete:function(e){var t=this;this.$confirm("此操作会将数据物理删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.generate.deletes(e).then((function(e){t.$message.success(e.message),t.handleSuccess()}))}))},handleSync:function(e){var t=this;this.$confirm("此操作会导致字段设置信息丢失，确定同步吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.generate.sync(e).then((function(e){e.success&&t.$message.success(e.message)}))}))},handlerSearch:function(){this.handleSuccess()},resetSearch:function(){this.queryParams={table_name:void 0},this.handleSuccess()},handleSuccess:function(){this.$refs.table.upData(this.queryParams)}}}),l=n("6b0d"),d=n.n(l);const h=d()(u,[["render",s]]);t["default"]=h}}]);