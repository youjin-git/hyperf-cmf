(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["setting-table","setting-table-save"],{a785:function(e,t,o){"use strict";o.r(t);var n=o("7a23"),l={class:"left-panel"},r=Object(n["createTextVNode"])("编辑"),a=Object(n["createTextVNode"])("删除");function c(e,t,o,c,i,d){var u=Object(n["resolveComponent"])("el-button"),s=Object(n["resolveComponent"])("el-header"),b=Object(n["resolveComponent"])("el-table-column"),f=Object(n["resolveComponent"])("el-popconfirm"),m=Object(n["resolveComponent"])("scTable"),p=Object(n["resolveComponent"])("el-main"),j=Object(n["resolveComponent"])("el-container"),O=Object(n["resolveComponent"])("save-dialog");return Object(n["openBlock"])(),Object(n["createElementBlock"])(n["Fragment"],null,[Object(n["createVNode"])(j,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,null,{default:Object(n["withCtx"])((function(){return[Object(n["createElementVNode"])("div",l,[Object(n["createVNode"])(u,{type:"primary",icon:"el-icon-plus",onClick:d.add},null,8,["onClick"])])]})),_:1}),Object(n["createVNode"])(p,{class:"nopadding"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(m,{ref:"table",apiObj:i.apiObj,"row-key":"id",onSelectionChange:d.selectionChange,stripe:""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,{type:"selection",width:"50"}),Object(n["createVNode"])(b,{label:"标识",prop:"code",width:"150"}),Object(n["createVNode"])(b,{label:"表格名称",prop:"name",width:"250"}),Object(n["createVNode"])(b,{label:"操作",fixed:"right",align:"right",width:"120"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(u,{type:"text",size:"small",onClick:function(t){return d.table_edit(e.row,e.$index)}},{default:Object(n["withCtx"])((function(){return[r]})),_:2},1032,["onClick"]),Object(n["createVNode"])(f,{title:"确定删除吗？",onConfirm:function(t){return d.table_del(e.row,e.$index)}},{reference:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{type:"text",size:"small"},{default:Object(n["withCtx"])((function(){return[a]})),_:1})]})),_:2},1032,["onConfirm"])]})),_:1})]})),_:1},8,["apiObj","onSelectionChange"])]})),_:1})]})),_:1}),i.dialog.save?(Object(n["openBlock"])(),Object(n["createBlock"])(O,{key:0,ref:"saveDialog",onSuccess:d.handleSuccess,onClosed:t[0]||(t[0]=function(e){return i.dialog.save=!1})},null,8,["onSuccess"])):Object(n["createCommentVNode"])("",!0)],64)}var i=o("1da1"),d=(o("96cf"),o("a434"),o("d3b7"),o("159b"),o("4de4"),o("dff9")),u={name:"tableSetting",components:{saveDialog:d["default"]},data:function(){return{dialog:{save:!1},apiObj:this.$API.system.table.list,selection:[]}},mounted:function(){},methods:{add:function(){var e=this;this.dialog.save=!0,this.$nextTick((function(){e.$refs.saveDialog.open()}))},table_edit:function(e){var t=this;this.dialog.save=!0,this.$nextTick((function(){t.$refs.saveDialog.open("edit").setData(e)}))},table_del:function(e,t){var o=this;return Object(i["a"])(regeneratorRuntime.mark((function n(){var l,r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return l={id:e.id},n.next=3,o.$API.demo.post.post(l);case 3:r=n.sent,200==r.code?(o.$refs.table.tableData.splice(t,1),o.$message.success("删除成功")):o.$alert(r.message,"提示",{type:"error"});case 5:case"end":return n.stop()}}),n)})))()},batch_del:function(){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$confirm("确定删除选中的 ".concat(e.selection.length," 项吗？"),"提示",{type:"warning"}).then((function(){var t=e.$loading();e.selection.forEach((function(t){e.$refs.table.tableData.forEach((function(o,n){t.id===o.id&&e.$refs.table.tableData.splice(n,1)}))})),t.close(),e.$message.success("操作成功")})).catch((function(){}));case 1:case"end":return t.stop()}}),t)})))()},selectionChange:function(e){this.selection=e},handleSuccess:function(e,t){"add"==t?(e.id=(new Date).getTime(),this.$refs.table.tableData.unshift(e)):"edit"==t&&this.$refs.table.tableData.filter((function(t){return t.id===e.id})).forEach((function(t){Object.assign(t,e)}))}}},s=o("6b0d"),b=o.n(s);const f=b()(u,[["render",c]]);t["default"]=f},dff9:function(e,t,o){"use strict";o.r(t);o("b0c0"),o("c7cd");var n=o("7a23"),l=Object(n["createTextVNode"])("过滤项"),r=Object(n["createTextVNode"])("保存"),a=Object(n["createTextVNode"])("取消");function c(e,t,o,c,i,d){var u=Object(n["resolveComponent"])("sc-title"),s=Object(n["resolveComponent"])("el-input"),b=Object(n["resolveComponent"])("el-form-item"),f=Object(n["resolveComponent"])("el-col"),m=Object(n["resolveComponent"])("el-row"),p=Object(n["resolveComponent"])("el-checkbox"),j=Object(n["resolveComponent"])("el-table-column"),O=Object(n["resolveComponent"])("el-button"),h=Object(n["resolveComponent"])("sc-form-table"),V=Object(n["resolveComponent"])("el-form"),w=Object(n["resolveComponent"])("el-main"),v=Object(n["resolveComponent"])("el-footer"),C=Object(n["resolveComponent"])("el-container"),x=Object(n["resolveComponent"])("el-drawer"),g=Object(n["resolveDirective"])("loading");return Object(n["openBlock"])(),Object(n["createBlock"])(x,{title:i.titleMap[i.mode],modelValue:i.visible,"onUpdate:modelValue":t[8]||(t[8]=function(e){return i.visible=e}),size:1e3,"destroy-on-close":"",onClosed:t[9]||(t[9]=function(t){return e.$emit("closed")})},{default:Object(n["withCtx"])((function(){return[Object(n["withDirectives"])((Object(n["openBlock"])(),Object(n["createBlock"])(C,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{style:{padding:"0 20px 20px 20px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(V,{ref:"dialogForm",model:i.form,rules:i.rules,"label-width":"100px","label-position":"top"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(u,{title:"基础"}),Object(n["createVNode"])(m,{gutter:20},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(f,{span:16},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,{label:"表格名称",prop:"name"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{modelValue:i.form.name,"onUpdate:modelValue":t[0]||(t[0]=function(e){return i.form.name=e}),placeholder:"请输入中文描述标题"},null,8,["modelValue"])]})),_:1})]})),_:1}),Object(n["createVNode"])(f,{span:8},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(b,{label:"标识",prop:"code"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(s,{modelValue:i.form.code,"onUpdate:modelValue":t[1]||(t[1]=function(e){return i.form.code=e}),placeholder:"请输入唯一标识"},null,8,["modelValue"])]})),_:1})]})),_:1})]})),_:1}),Object(n["createVNode"])(b,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(p,{modelValue:i.form.remoteSort,"onUpdate:modelValue":t[2]||(t[2]=function(e){return i.form.remoteSort=e}),label:"远程排序"},null,8,["modelValue"]),Object(n["createVNode"])(p,{modelValue:i.form.remoteFilter,"onUpdate:modelValue":t[3]||(t[3]=function(e){return i.form.remoteFilter=e}),label:"远程过滤"},null,8,["modelValue"])]})),_:1}),Object(n["createVNode"])(u,{title:"表格列"}),Object(n["createVNode"])(b,{prop:"column"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{modelValue:i.form.column,"onUpdate:modelValue":t[4]||(t[4]=function(e){return i.form.column=e}),addTemplate:i.addTemplate,"drag-sort":"",placeholder:"暂无数据"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{prop:"label",label:"名称"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(s,{modelValue:e.row.label,"onUpdate:modelValue":function(t){return e.row.label=t},placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n["createVNode"])(j,{prop:"prop",label:"字段",width:"150"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(s,{modelValue:e.row.prop,"onUpdate:modelValue":function(t){return e.row.prop=t},placeholder:"请输入字段"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n["createVNode"])(j,{prop:"width",label:"宽度",width:"100"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(s,{modelValue:e.row.width,"onUpdate:modelValue":function(t){return e.row.width=t},placeholder:"请输入宽度"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n["createVNode"])(j,{prop:"hide",label:"隐藏",width:"80",align:"center"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(p,{modelValue:e.row.hide,"onUpdate:modelValue":function(t){return e.row.hide=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n["createVNode"])(j,{prop:"sortable",label:"排序",width:"80",align:"center"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(p,{modelValue:e.row.sortable,"onUpdate:modelValue":function(t){return e.row.sortable=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n["createVNode"])(j,{prop:"filters",label:"过滤项",width:"80",align:"center"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(O,{type:"text",style:Object(n["normalizeStyle"])({color:0==e.row.filters.length?"#bbb":null}),onClick:function(t){return d.setFilters(e.row.filters)}},{default:Object(n["withCtx"])((function(){return[l]})),_:2},1032,["style","onClick"])]})),_:1}),Object(n["createVNode"])(j,{prop:"fixed",label:"固定",width:"80",align:"center"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(p,{modelValue:e.row.fixed,"onUpdate:modelValue":function(t){return e.row.fixed=t}},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["modelValue","addTemplate"])]})),_:1})]})),_:1},8,["model","rules"])]})),_:1}),Object(n["createVNode"])(v,null,{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(O,{type:"primary",loading:i.isSaveing,onClick:d.submit},{default:Object(n["withCtx"])((function(){return[r]})),_:1},8,["loading","onClick"]),Object(n["createVNode"])(O,{onClick:t[5]||(t[5]=function(e){return i.visible=!1})},{default:Object(n["withCtx"])((function(){return[a]})),_:1})]})),_:1})]})),_:1})),[[g,i.loading]]),Object(n["createVNode"])(x,{title:"过滤项配置",modelValue:i.setFiltersVisible,"onUpdate:modelValue":t[7]||(t[7]=function(e){return i.setFiltersVisible=e}),size:500,"destroy-on-close":""},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(w,{style:{padding:"0 20px 20px 20px"}},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(h,{modelValue:i.selectionFilters,"onUpdate:modelValue":t[6]||(t[6]=function(e){return i.selectionFilters=e}),addTemplate:i.filtersAddTemplate,"drag-sort":"",placeholder:"暂无数据"},{default:Object(n["withCtx"])((function(){return[Object(n["createVNode"])(j,{prop:"text",label:"名称"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(s,{modelValue:e.row.text,"onUpdate:modelValue":function(t){return e.row.text=t},placeholder:"请输入名称"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1}),Object(n["createVNode"])(j,{prop:"value",label:"值",width:"150"},{default:Object(n["withCtx"])((function(e){return[Object(n["createVNode"])(s,{modelValue:e.row.value,"onUpdate:modelValue":function(t){return e.row.value=t},placeholder:"请输入值"},null,8,["modelValue","onUpdate:modelValue"])]})),_:1})]})),_:1},8,["modelValue","addTemplate"])]})),_:1})]})),_:1},8,["modelValue"])]})),_:1},8,["title","modelValue"])}var i=o("1da1"),d=(o("96cf"),{emits:["success","closed"],data:function(){return{loading:!1,mode:"add",titleMap:{add:"新增",edit:"编辑"},form:{},rules:{name:[{required:!0,message:"请输入表格名称",trigger:"blur"}],code:[{required:!0,message:"请输入唯一标识",trigger:"blur"}]},addTemplate:{label:"",prop:"",width:"100",hide:!1,sortable:!1,fixed:!1,filters:[]},visible:!1,isSaveing:!1,selectionFilters:[],filtersAddTemplate:{text:"",value:""},setFiltersVisible:!1}},mounted:function(){},methods:{open:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"add";return this.mode=e,this.visible=!0,this},submit:function(){var e=this;this.$refs.dialogForm.validate(function(){var t=Object(i["a"])(regeneratorRuntime.mark((function t(o){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!o){t.next=7;break}return e.isSaveing=!0,t.next=4,e.$API.demo.post.post(e.form);case 4:n=t.sent,e.isSaveing=!1,200==n.code?(e.$emit("success",e.form,e.mode),e.visible=!1,e.$message.success("操作成功")):e.$alert(n.message,"提示",{type:"error"});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())},setData:function(e){var t=this;this.loading=!0;var o={id:e.id};setTimeout(Object(i["a"])(regeneratorRuntime.mark((function e(){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$API.system.table.info.get(o);case 2:n=e.sent,t.loading=!1,t.form=n.data;case 5:case"end":return e.stop()}}),e)}))),400)},setFilters:function(e){this.selectionFilters=e,this.setFiltersVisible=!0}}}),u=o("6b0d"),s=o.n(u);const b=s()(d,[["render",c]]);t["default"]=b}}]);