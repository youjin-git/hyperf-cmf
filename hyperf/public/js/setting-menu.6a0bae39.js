(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["setting-menu"],{c2bd:function(e,t,n){},c584:function(e,t,n){"use strict";n.r(t);var o=n("7a23"),r={class:"custom-tree-node el-tree-node__label"},a={class:"label"},c={class:"do"},i=["onClick"];function u(e,t,n,u,l,s){var d=Object(o["resolveComponent"])("el-input"),m=Object(o["resolveComponent"])("el-header"),f=Object(o["resolveComponent"])("el-tree"),p=Object(o["resolveComponent"])("el-main"),b=Object(o["resolveComponent"])("el-button"),h=Object(o["resolveComponent"])("el-footer"),g=Object(o["resolveComponent"])("el-container"),O=Object(o["resolveComponent"])("el-aside"),j=Object(o["resolveComponent"])("save"),v=Object(o["resolveDirective"])("loading");return Object(o["openBlock"])(),Object(o["createBlock"])(g,null,{default:Object(o["withCtx"])((function(){return[Object(o["withDirectives"])((Object(o["openBlock"])(),Object(o["createBlock"])(O,{width:"300px"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(g,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(m,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(d,{placeholder:"输入关键字进行过滤",modelValue:l.menuFilterText,"onUpdate:modelValue":t[0]||(t[0]=function(e){return l.menuFilterText=e}),clearable:""},null,8,["modelValue"])]})),_:1}),Object(o["createVNode"])(p,{class:"nopadding"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(f,{"default-expand-all":"",ref:"menu",class:"menu","node-key":"id",data:l.menuList,props:l.menuProps,draggable:"","highlight-current":"","expand-on-click-node":!1,"check-strictly":"","show-checkbox":"","filter-node-method":s.menuFilterNode,onNodeClick:s.menuClick,onNodeDrop:s.nodeDrop},{default:Object(o["withCtx"])((function(e){var t=e.node,n=e.data;return[Object(o["createElementVNode"])("span",r,[Object(o["createElementVNode"])("span",a,Object(o["toDisplayString"])(t.label),1),Object(o["createElementVNode"])("span",c,[Object(o["createElementVNode"])("i",{class:"el-icon-plus",onClick:Object(o["withModifiers"])((function(e){return s.onAdd(t,n)}),["stop"])},null,8,i)])])]})),_:1},8,["data","props","filter-node-method","onNodeClick","onNodeDrop"])]})),_:1}),Object(o["createVNode"])(h,{style:{height:"51px"}},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(b,{type:"primary",size:"mini",icon:"el-icon-plus",onClick:t[1]||(t[1]=function(e){return s.onAdd()})}),Object(o["createVNode"])(b,{type:"danger",size:"mini",plain:"",icon:"el-icon-delete",onClick:s.delMenu},null,8,["onClick"])]})),_:1})]})),_:1})]})),_:1})),[[v,l.menuloading]]),Object(o["createVNode"])(g,null,{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(p,{class:"nopadding",style:{padding:"20px"},ref:"main"},{default:Object(o["withCtx"])((function(){return[Object(o["createVNode"])(j,{ref:"save",menu:l.menuList},null,8,["menu"])]})),_:1},512)]})),_:1})]})),_:1})}var l=n("1da1"),s=(n("96cf"),n("4de4"),n("d3b7"),n("99af"),n("d81d"),n("159b"),n("0dc2")),d=1,m={name:"settingMenu",components:{save:s["default"]},data:function(){return{menuloading:!1,menuList:[],menuProps:{label:function(e){return e.title}},menuFilterText:""}},watch:{menuFilterText:function(e){this.$refs.menu.filter(e)}},mounted:function(){console.log("getMenu"),this.getMenu()},methods:{getMenu:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e.menuloading=!0,t.next=3,e.$API.system.menu.list.get();case 3:n=t.sent,e.menuloading=!1,e.menuList=n;case 6:case"end":return t.stop()}}),t)})))()},menuClick:function(e,t){var n=1==t.level?void 0:t.parent.data.id;this.$refs.save.setData(e,n),this.$refs.main.$el.scrollTop=0},menuFilterNode:function(e,t){if(!e)return!0;var n=t.meta.title;return-1!==n.indexOf(e)},nodeDrop:function(e,t,n){console.log(e,t,n),console.log(e.data.id,t.data.id,n),this.$HTTP().params({menu_id:e.data.id,target_menu_id:t.data.id,types:n}).post("/admin/menu/set-position").then((function(e){})),this.$refs.save.setData({}),this.$message("拖拽对象：".concat(e.data.meta.title,", 释放对象：").concat(t.data.meta.title,", 释放对象的位置：").concat(n))},onAdd:function(e,t){var n=this;return Object(l["a"])(regeneratorRuntime.mark((function e(){var o,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return o="未命名"+d++,r={pid:t?t.id:0,name:o,path:"",component:"",title:o,type:"menu"},n.menuloading=!0,e.next=5,n.$HTTP().showSuccessInfo("添加成功").params(r).post("/admin/menu/add").catch((function(e){n.getMenu()}));case 5:e.sent,n.menuloading=!1,n.getMenu();case 8:case"end":return e.stop()}}),e)})))()},delMenu:function(){var e=this;return Object(l["a"])(regeneratorRuntime.mark((function t(){var n,o,r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=e.$refs.menu.getCheckedNodes(),0!=n.length){t.next=4;break}return e.$message.warning("请选择需要删除的项"),t.abrupt("return",!1);case 4:return t.next=6,e.$confirm("确认删除已选择的菜单吗？","提示",{type:"warning",confirmButtonText:"删除",confirmButtonClass:"el-button--danger"}).catch((function(){}));case 6:if(o=t.sent,"confirm"==o){t.next=9;break}return t.abrupt("return",!1);case 9:return e.menuloading=!0,r={ids:n.map((function(e){return e.id}))},t.next=13,e.$API.demo.post.post(r);case 13:a=t.sent,e.menuloading=!1,200==a.code?n.forEach((function(t){var n=e.$refs.menu.getNode(t);n.isCurrent&&e.$refs.save.setData({}),e.$refs.menu.remove(t)})):e.$message.warning(a.message);case 16:case"end":return t.stop()}}),t)})))()}}},f=(n("da13"),n("6b0d")),p=n.n(f);const b=p()(m,[["render",u],["__scopeId","data-v-14e37bd6"]]);t["default"]=b},da13:function(e,t,n){"use strict";n("c2bd")}}]);