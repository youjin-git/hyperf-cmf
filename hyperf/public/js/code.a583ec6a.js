(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["code"],{"62c4":function(e,t,n){"use strict";n.r(t);var r=n("7a23"),c={class:"left-panel"},a=Object(r["createTextVNode"])("添加 "),o=Object(r["createTextVNode"])("生成代码 "),i=Object(r["createTextVNode"])(" 预览 ");function s(e,t,n,s,u,l){var d=Object(r["resolveComponent"])("el-button"),f=Object(r["resolveComponent"])("el-header"),h=Object(r["resolveComponent"])("el-table-column"),m=Object(r["resolveComponent"])("yjTable"),b=Object(r["resolveComponent"])("el-main"),p=Object(r["resolveComponent"])("el-container"),j=Object(r["resolveComponent"])("preview");return Object(r["openBlock"])(),Object(r["createElementBlock"])(r["Fragment"],null,[Object(r["createVNode"])(p,null,{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(f,null,{default:Object(r["withCtx"])((function(){return[Object(r["createElementVNode"])("div",c,[Object(r["createVNode"])(d,{type:"primary",icon:"el-icon-plus",onClick:l.onAdd},{default:Object(r["withCtx"])((function(){return[a]})),_:1},8,["onClick"]),Object(r["createVNode"])(d,{type:"primary",icon:"el-icon-download",onClick:l.handleGenCodes},{default:Object(r["withCtx"])((function(){return[o]})),_:1},8,["onClick"])])]})),_:1}),Object(r["createVNode"])(b,{class:"nopadding"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(m,{ref:"yjTable",data:u.tableData,apiObj:u.apiObj,params:u.formParams},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(h,{type:"selection",width:"50"}),Object(r["createVNode"])(h,{label:"表名",prop:"tables_name",width:"150"}),Object(r["createVNode"])(h,{label:"操作",fixed:"right",align:"right",width:"130"},{default:Object(r["withCtx"])((function(){return[Object(r["createVNode"])(d,{type:"text",onClick:l.preview},{default:Object(r["withCtx"])((function(){return[i]})),_:1},8,["onClick"])]})),_:1})]})),_:1},8,["data","apiObj","params"])]})),_:1})]})),_:1}),Object(r["createVNode"])(j,{ref:"preview"},null,512)],64)}var u=n("1da1"),l=(n("d81d"),n("a15b"),n("96cf"),n("3138")),d={name:"setting:code",components:{preview:l["default"]},data:function(){return{formParams:{id:1},apiObj:this.$HTTP().url("/admin/code/code/lists"),tableData:[],queryParams:{table_name:void 0},selection:[]}},created:function(){return Object(u["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})))()},methods:{onAdd:function(){this.$modalForm(this.$HTTP().post("/admin/generator/generator_table/form")).then((function(e){}))},selectionChange:function(e){this.selection=e},preview:function(){console.log(this.$refs.preview)},confirm:function(){this.handleSuccess()},handleGenCodes:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:console.log(e.$refs.preview);case 1:case"end":return t.stop()}}),t)})))()},generateCode:function(e){var t=this;return Object(u["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.$message.info("代码生成下载中，请稍后"),n.next=3,t.$API.generate.generate(e).then((function(e){e.message&&!e.success?t.$message.error(e.message):(t.$TOOL.download(e),t.$message.success("代码生成成功"))}));case 3:case"end":return n.stop()}}),n)})))()},handleDeleteBatch:function(){var e=this;return Object(u["a"])(regeneratorRuntime.mark((function t(){var n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!(e.selection.length>0)){t.next=6;break}return n=e.selection.map((function(e){return e.id})),t.next=4,e.handleDelete(n.join(","));case 4:t.next=7;break;case 6:e.$message.error("请选择要删除的项");case 7:case"end":return t.stop()}}),t)})))()},handleDelete:function(e){var t=this;this.$confirm("此操作会将数据物理删除？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.generate.deletes(e).then((function(e){t.$message.success(e.message),t.handleSuccess()}))}))},handleSync:function(e){var t=this;this.$confirm("此操作会导致字段设置信息丢失，确定同步吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$API.generate.sync(e).then((function(e){e.success&&t.$message.success(e.message)}))}))},handlerSearch:function(){this.handleSuccess()},resetSearch:function(){this.queryParams={table_name:void 0},this.handleSuccess()},handleSuccess:function(){this.$refs.table.upData(this.queryParams)}}},f=n("6b0d"),h=n.n(f);const m=h()(d,[["render",s]]);t["default"]=m}}]);